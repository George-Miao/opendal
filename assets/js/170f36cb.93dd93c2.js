"use strict";(self.webpackChunkopendal_website=self.webpackChunkopendal_website||[]).push([[527],{5766:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>d,metadata:()=>a,toc:()=>h});var s=n(1527),r=n(2175);function o(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"opendal-object_store-binding",children:"OpenDAL object_store Binding"}),"\n",(0,s.jsxs)(t.p,{children:["This crate intends to build an ",(0,s.jsx)(t.a,{href:"https://crates.io/crates/object_store",children:"object_store"})," binding."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"OpendalStore"})," uses the ",(0,s.jsx)(t.code,{children:"opendal"})," crate to interact with the underlying object storage system. The ",(0,s.jsx)(t.code,{children:"Operator"})," is used to create a new ",(0,s.jsx)(t.code,{children:"OpendalStore"})," instance. The ",(0,s.jsx)(t.code,{children:"OpendalStore"})," uses the ",(0,s.jsx)(t.code,{children:"Operator"})," to perform operations on the object storage system, such as ",(0,s.jsx)(t.code,{children:"put"}),", ",(0,s.jsx)(t.code,{children:"get"}),", ",(0,s.jsx)(t.code,{children:"delete"}),", and ",(0,s.jsx)(t.code,{children:"list"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsxs)(t.p,{children:["first you need to add the following dependencies to your ",(0,s.jsx)(t.code,{children:"Cargo.toml"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-toml",children:'[dependencies]\nobject_store = "0.9.0"\nobject_store_opendal = "0.43.1"\nopendal = { version = "0.46.0", features = ["services-s3"] }\n'})}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"the current version we support is object store 0.9"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Then you can use the ",(0,s.jsx)(t.code,{children:"OpendalStore"})," as follows:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",children:'use std::sync::Arc;\n\nuse bytes::Bytes;\nuse object_store::path::Path;\nuse object_store::ObjectStore;\nuse object_store_opendal::OpendalStore;\nuse opendal::{services::S3, Builder, Operator};\n\nasync fn operate_object_store() {\n    let builder = S3::from_map(\n        vec![\n            ("access_key".to_string(), "my_access_key".to_string()),\n            ("secret_key".to_string(), "my_secret_key".to_string()),\n            ("endpoint".to_string(), "my_endpoint".to_string()),\n            ("region".to_string(), "my_region".to_string()),\n        ]\n        .into_iter()\n        .collect(),\n    );\n\n    // Create a new operator\n    let operator = Operator::new(builder).unwrap().finish();\n\n    // Create a new object store\n    let object_store = Arc::new(OpendalStore::new(operator));\n\n    let path = Path::from("data/nested/test.txt");\n    let bytes = Bytes::from_static(b"hello, world! I am nested.");\n\n    object_store.put(&path, bytes.clone().into()).await.unwrap();\n\n    let content = object_store.get(&path).await.unwrap().bytes().await.unwrap();\n\n    assert_eq!(content, bytes);\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"api",children:"API"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"OpendalStore"})," implements the ",(0,s.jsx)(t.code,{children:"ObjectStore"})," trait, which provides the following methods:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Method"}),(0,s.jsx)(t.th,{children:"Description"}),(0,s.jsx)(t.th,{children:"link"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"put"})}),(0,s.jsx)(t.td,{children:"Put an object into the store."}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://docs.rs/object_store/0.9.0/object_store/trait.ObjectStore.html#tymethod.put",children:"put"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"get"})}),(0,s.jsx)(t.td,{children:"Get an object from the store."}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://docs.rs/object_store/0.9.0/object_store/trait.ObjectStore.html#tymethod.get",children:"get"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"get_range"})}),(0,s.jsx)(t.td,{children:"Get a range of bytes from an object in the store."}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://docs.rs/object_store/0.9.0/object_store/trait.ObjectStore.html#tymethod.get_range",children:"get_range"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"head"})}),(0,s.jsx)(t.td,{children:"Get the metadata of an object in the store."}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://docs.rs/object_store/0.9.0/object_store/trait.ObjectStore.html#tymethod.head",children:"head"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"delete"})}),(0,s.jsx)(t.td,{children:"Delete an object from the store."}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://docs.rs/object_store/0.9.0/object_store/trait.ObjectStore.html#tymethod.delete",children:"delete"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"list"})}),(0,s.jsx)(t.td,{children:"List objects in the store."}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://docs.rs/object_store/0.9.0/object_store/trait.ObjectStore.html#tymethod.list",children:"list"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"list_with_offset"})}),(0,s.jsx)(t.td,{children:"List objects in the store with an offset."}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://docs.rs/object_store/0.9.0/object_store/trait.ObjectStore.html#tymethod.list_with_offset",children:"list_with_offset"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"list_with_delimiter"})}),(0,s.jsx)(t.td,{children:"List objects in the store with a delimiter."}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://docs.rs/object_store/0.9.0/object_store/trait.ObjectStore.html#tymethod.list_with_delimiter",children:"list_with_delimiter"})})]})]})]})]})}function c(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}const d={title:"object_store_opendal"},i=void 0,a={id:"integrations/object_store_opendal",title:"object_store_opendal",description:"objectstoreopendal is an integration which uses OpenDAL as a backend for the objectstore.",source:"@site/docs/integrations/object_store_opendal.mdx",sourceDirName:"integrations",slug:"/integrations/object_store_opendal",permalink:"/docs/integrations/object_store_opendal",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/opendal/tree/main/website/docs/integrations/object_store_opendal.mdx",tags:[],version:"current",lastUpdatedBy:"zjregee",lastUpdatedAt:1709782823,formattedLastUpdatedAt:"Mar 7, 2024",frontMatter:{title:"object_store_opendal"},sidebar:"docs",previous:{title:"dav-server-opendalfs",permalink:"/docs/integrations/dav-server-opendalfs"}},l={},h=[];function j(e){const t={a:"a",code:"code",p:"p",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://crates.io/crates/object_store_opendal",children:(0,s.jsx)(t.code,{children:"object_store_opendal"})})," is an integration which uses OpenDAL as a backend for the ",(0,s.jsx)(t.a,{href:"https://docs.rs/object_store/latest/object_store/",children:"object_store"}),"."]}),"\n","\n","\n",(0,s.jsx)(c,{components:e.components})]})}function p(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(j,{...e})}):j(e)}},2175:(e,t,n)=>{n.d(t,{Z:()=>d,a:()=>c});var s=n(959);const r={},o=s.createContext(r);function c(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);